cmake_minimum_required(VERSION 3.16)

# 设置项目名称
project(test_linear_polymer VERSION 1.0 LANGUAGES CXX)

# 设置C++标准
set(CMAKE_CXX_STANDARD 20)
set(CMAKE_CXX_STANDARD_REQUIRED True)

# 设置包含目录
include_directories(${PROJECT_SOURCE_DIR}/include)

# 源文件列表
set(SOURCES
    ${PROJECT_SOURCE_DIR}/src/MuVT_MC_LinearPolymer.cpp
    ${PROJECT_SOURCE_DIR}/src/Utils.cpp
    ${PROJECT_SOURCE_DIR}/test_linear_polymer.cpp
)

# 创建测试可执行文件
add_executable(test_linear_polymer ${SOURCES})

# === 关键修改 ===
# MSVC 不需要链接 m 库，只有非 MSVC (如 Linux/MinGW) 才需要
if(NOT MSVC)
    target_link_libraries(test_linear_polymer PRIVATE m)
endif()

# === 针对 Visual Studio 的优化建议 ===
if(MSVC)
    target_compile_options(test_linear_polymer PRIVATE 
        /MP   # 启用多核编译 (加快编译速度)
        /W3   # 开启常用警告
        /utf-8      # 强制源文件和执行字符集为 UTF-8，解决乱码
    )
endif()

# 打印配置信息
message(STATUS "=========================================")
message(STATUS "Project: ${PROJECT_NAME}")
message(STATUS "Compiler: ${CMAKE_CXX_COMPILER_ID}")
message(STATUS "Build type: ${CMAKE_BUILD_TYPE}")
message(STATUS "=========================================")
